import{S as _,P as F,R as S,W as A,G as z,a as C,M as m,B as O,b as L,c as P,V as w,D as R,A as T,d as v,e as g,L as W,f as b}from"./vendor.46a6ae28.js";const D=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))e(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function e(s){if(s.ep)return;s.ep=!0;const n=i(s);fetch(s.href,n)}};D();const c=new _,h=new F(45,window.innerWidth/window.innerHeight,.1,1e3);document.addEventListener("mousedown",B,!1);window.addEventListener("resize",E,!1);var d=[];const a=new S;function E(){h.aspect=window.innerWidth/window.innerHeight,h.updateProjectionMatrix(),u.setSize(window.innerWidth,window.innerHeight),d=[];for(var o=0;o<100;o++){a.setFromCamera({x:-1,y:(o-50)/50},h);var t=a.intersectObjects(c.children,!1),i=t[0].point;i.x-=5,d.push(i)}for(var o=0;o<100;o++){a.setFromCamera({x:1,y:(o-50)/50},h);var t=a.intersectObjects(c.children,!1),i=t[0].point;i.x+=5,d.push(i)}for(var o=0;o<100;o++){a.setFromCamera({x:(o-50)/50,y:1},h);var t=a.intersectObjects(c.children,!1),i=t[0].point;i.x-=5,d.push(i)}for(var o=0;o<100;o++){a.setFromCamera({x:(o-50)/50,y:-1},h);var t=a.intersectObjects(c.children,!1),i=t[0].point;i.x+=5,d.push(i)}}const u=new A({canvas:document.querySelector("#bg")}),I=new z;u.shadowMap.enabled=!0;u.shadowMap.type=C;u.setPixelRatio(window.devicePixelRatio);u.setSize(window.innerWidth,window.innerHeight);h.position.set(0,40,55);h.rotation.set(m.degToRad(-45),0,0);const k=new O(2e3,1,2e3,5,5,5),H=new L({color:3443761}),j=new P(k,H);j.receiveShadow=!0;j.position.y=-15.5;c.add(j);class x{constructor(t,i,e,s,n){this.x=t,this.y=i,this.z=e,this.r=0,this.object=null,this.mixer=new v(this.object),this.target=s,this.time=0,this.jump_animation=null,this.ribbit_animation=null,this.animations=null,this.dir=null,this.moving=n,this.jumps=m.randInt(2,4),this.click=0,this.ribbit_sound=new Audio("ribbit.wav"),this.hops=[new Audio("hop1.wav"),new Audio("hop2.wav"),new Audio("hop3.wav")]}async add(){var t=await I.loadAsync("frog.gltf");t.scene.traverse(function(r){r.isObject3D&&(r.castShadow=!0,r.receiveShadow=!0)}),this.object=t.scene.children[0],console.log(t.scene.children[1]),this.mixer=new v(this.object),this.animations=t.animations;const i=g.findByName(this.animations,"Jump");this.jump_animation=this.mixer.clipAction(i),this.jump_animation.loop=W,this.jump_animation.repetitions=2,this.jump_animation.timeScale=1;const e=g.findByName(this.animations,"Ribbit");if(this.ribbit_animation=this.mixer.clipAction(e),this.ribbit_animation.repetitions=1,this.ribbit_animation.timeScale=.6,this.moving){this.jump_animation.play();var s=this.hops[m.randInt(0,2)];s.volume=.5,s.play()}else this.object.rotation.y=m.degToRad(-180);this.object.scale.set(6,6,6),this.object.position.set(this.x,this.y,this.z);var n=new b(this.target.x,this.object.position.y,this.target.y);this.object.position.distanceTo(n)>1&&(this.r=Math.atan2((this.object.position.x-this.target.x)/this.object.position.distanceTo(n),(this.object.position.z-this.target.y)/this.object.position.distanceTo(n))),this.dir=new w((this.object.position.x-this.target.x)/this.object.position.distanceTo(n),(this.object.position.z-this.target.y)/this.object.position.distanceTo(n)),this.object.castShadow=!0,c.add(this.object)}update(){this.mixer.update(.05);var t=Math.max(Math.sin(this.time)*7,0);if(this.moving&&t>0&&!this.jump_animation.isRunning()){if(this.jumps>1){this.jump_animation.reset();var i=this.hops[m.randInt(0,2)];i.volume=.5,i.play()}this.jumps-=1}this.jumps<1&&(this.moving=!1),this.moving&&this.jumps>0?(this.object.position.x-=this.dir.x*Math.ceil(Math.max(Math.sin(this.time),0))/1.5,this.object.position.z-=this.dir.y*Math.ceil(Math.max(Math.sin(this.time),0))/1.5,this.object.setRotationFromAxisAngle(new b(1,0,0),Math.sin(this.time+Math.PI/2)*Math.max(Math.sin(this.time),0)),this.object.rotateOnWorldAxis(new b(0,1,0),this.r-this.object.rotation.y),this.object.position.y=this.y+t+Math.sin(Math.max(this.click-this.time,0)*2)/2):this.object.position.y=this.y+Math.sin(Math.max(this.click-this.time,0)*2)/2,this.time<50&&p.forEach(e=>{if(e.object!=null&&e.object.position!=this.object.position){var s=Math.max(5-this.object.position.distanceTo(e.object.position),0)/5;this.object.position.x+=(this.object.position.x-e.object.position.x)*s/4,this.object.position.z+=(this.object.position.z-e.object.position.z)*s/4}}),this.time+=.1}}var p=[];p.push(new x(0,-14.9,0,new w(0,0),!1));p.forEach(o=>{o.add()});const l=new R(16643292,1);l.position.set(20,1,20);l.position.y=70;l.castShadow=!0;var f=135;l.shadow.mapSize.width=1024*2;l.shadow.mapSize.height=1024*2;l.shadow.camera.top=f;l.shadow.camera.bottom=-f;l.shadow.camera.left=f;l.shadow.camera.right=-f;const N=new T(16643292,.3);c.add(N);c.add(l);function B(o){if(d.length==0){for(var t=0;t<100;t++){a.setFromCamera({x:-1,y:(t-50)/50},h);var i=a.intersectObjects(c.children,!1),e=i[0].point;e.x-=5,d.push(e)}for(var t=0;t<100;t++){a.setFromCamera({x:1,y:(t-50)/50},h);var i=a.intersectObjects(c.children,!1),e=i[0].point;e.x+=5,d.push(e)}for(var t=0;t<100;t++){a.setFromCamera({x:(t-50)/50,y:1},h);var i=a.intersectObjects(c.children,!1),e=i[0].point;e.x-=5,d.push(e)}for(var t=0;t<100;t++){a.setFromCamera({x:(t-50)/50,y:-1},h);var i=a.intersectObjects(c.children,!1),e=i[0].point;e.x+=5,d.push(e)}}var s=new b;s.x=event.clientX/window.innerWidth*2-1,s.y=-(event.clientY/window.innerHeight)*2+1,a.setFromCamera(s,h);var n=[];p.forEach(M=>{n.push(M.object)});for(var t=0;t<p.length;t++){var r=p[t],i=a.intersectObject(r.object,!0);if(i.length>0&&r.ribbit_sound.paused){console.log(i[0].point),r.click=r.time+Math.PI/2,r.ribbit_animation.play(),r.ribbit_animation.reset(),r.ribbit_sound.playbackRate=m.randFloat(.5,1.5),r.ribbit_sound.play();var e=d[m.randInt(0,d.length-1)];p.push(new x(e.x,-14.9,e.z,new w(m.randFloat(-20,20),m.randFloat(-50,50)),!0)),p[p.length-1].add();break}}}function y(){requestAnimationFrame(y),u.render(c,h),p.forEach(o=>{o.object!=null&&o.update()})}y();
