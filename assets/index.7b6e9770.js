import{S as M,C as F,P as S,W as _,G as z,a as L,M as n,b as P,c as A,d as C,R,V as w,D as T,A as W,e as y,f as D,L as O,g as f}from"./vendor.b9ece3cc.js";const E=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const m of o.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function s(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(t){if(t.ep)return;t.ep=!0;const o=s(t);fetch(t.href,o)}};E();const d=new M;d.background=new F(3443761);const c=new S(45,window.innerWidth/window.innerHeight,.1,1e3);document.addEventListener("mousedown",q,!1);window.addEventListener("resize",I,!1);function I(){c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix(),l.setSize(window.innerWidth,window.innerHeight)}const l=new _({canvas:document.querySelector("#bg")}),k=new z;l.shadowMap.enabled=!0;l.shadowMap.type=L;l.setPixelRatio(window.devicePixelRatio);l.setSize(window.innerWidth,window.innerHeight);c.position.set(0,40,55);c.rotation.set(n.degToRad(-45),0,0);const H=new P(2e3,2e3,5,5),G=new A({color:3443761}),p=new C(H,G);p.receiveShadow=!0;p.rotation.x=n.degToRad(-90);p.position.y=-15;d.add(p);const u=new R;u.layers.enableAll();for(var b=0;b<100;b++){u.setFromCamera({x:0,y:b/100},c);var N=u.intersectObject(p,!1);console.log(N[0].point)}class g{constructor(e,s,i,t,o){this.x=e,this.y=s,this.z=i,this.r=0,this.object=null,this.mixer=new y(this.object),this.target=t,this.time=0,this.jump_animation=null,this.animations=null,this.dir=null,this.moving=o,this.jumps=n.randInt(2,5),this.click=0}async add(){var e=await k.loadAsync("frog.gltf");e.scene.traverse(function(t){t.isObject3D&&(t.castShadow=!0,t.receiveShadow=!0)}),this.object=e.scene.children[0],this.mixer=new y(this.object),this.animations=e.animations;const s=D.findByName(this.animations,"Jump");this.jump_animation=this.mixer.clipAction(s),this.jump_animation.loop=O,this.jump_animation.repetitions=2,this.jump_animation.timeScale=1,this.moving?this.jump_animation.play():this.object.rotation.y=n.degToRad(-180),this.object.scale.set(6,6,6),this.object.position.set(this.x,this.y,this.z);var i=new f(this.target.x,this.object.position.y,this.target.y);this.object.position.distanceTo(i)>1&&(this.r=Math.atan2((this.object.position.x-this.target.x)/this.object.position.distanceTo(i),(this.object.position.z-this.target.y)/this.object.position.distanceTo(i))),this.dir=new w((this.object.position.x-this.target.x)/this.object.position.distanceTo(i),(this.object.position.z-this.target.y)/this.object.position.distanceTo(i)),this.object.castShadow=!0,d.add(this.object)}update(){this.mixer.update(.05);var e=Math.max(Math.sin(this.time)*7,0);this.moving&&e>0&&!this.jump_animation.isRunning()&&(this.jumps>1&&this.jump_animation.reset(),this.jumps-=1),this.jumps<1&&(this.moving=!1),this.moving&&this.jumps>0?(this.object.position.x-=this.dir.x*Math.ceil(Math.max(Math.sin(this.time),0))/1.5,this.object.position.z-=this.dir.y*Math.ceil(Math.max(Math.sin(this.time),0))/1.5,this.object.setRotationFromAxisAngle(new f(1,0,0),Math.sin(this.time+Math.PI/2)*Math.max(Math.sin(this.time),0)),this.object.rotateOnWorldAxis(new f(0,1,0),this.r-this.object.rotation.y),this.object.position.y=this.y+e+Math.sin(Math.max(this.click-this.time,0)*2)/2):this.object.position.y=this.y+Math.sin(Math.max(this.click-this.time,0)*2)/2,this.time<50&&a.forEach(s=>{if(s.object!=null&&s.object.position!=this.object.position){var i=Math.max(5-this.object.position.distanceTo(s.object.position),0)/5;this.object.position.x+=(this.object.position.x-s.object.position.x)*i/4,this.object.position.z+=(this.object.position.z-s.object.position.z)*i/4}}),this.time+=.1}}var a=[];a.push(new g(0,-14.9,0,new w(0,0),!1));a.forEach(h=>{h.add()});const r=new T(16643292,1);r.position.set(20,1,20);r.position.y=70;r.castShadow=!0;var j=135;r.shadow.mapSize.width=1024*2;r.shadow.mapSize.height=1024*2;r.shadow.camera.top=j;r.shadow.camera.bottom=-j;r.shadow.camera.left=j;r.shadow.camera.right=-j;const V=new W(16643292,.3);d.add(V);d.add(r);function q(h){var e=new f;e.x=event.clientX/window.innerWidth*2-1,e.y=-(event.clientY/window.innerHeight)*2+1,u.setFromCamera(e,c);var s=[];a.forEach(v=>{s.push(v.object)});for(var i=0;i<a.length;i++){var t=a[i],o=u.intersectObject(t.object,!0);if(o.length>0){console.log(o[0].point),t.click=t.time+Math.PI/2;var m=n.randInt(0,1);m?a.push(new g(n.randInt(0,1)*220-110,-14.9,n.randFloat(-90,40),new w(n.randFloat(-20,20),n.randFloat(-50,50)),!0)):a.push(new g(n.randFloat(-110,110),-14.9,n.randInt(0,1)*130-90,new w(n.randFloat(-20,20),n.randFloat(-50,50)),!0)),a[a.length-1].add();break}}}function x(){requestAnimationFrame(x),l.render(d,c),a.forEach(h=>{h.object!=null&&h.update()})}x();
